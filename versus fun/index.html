<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Versus Fun - Multiplayer</title>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body onclick="tryPlayMusic()">

    <button id="music-btn">ğŸ”‡</button>
    <div class="background-anim"></div>
    <div class="particles"><span></span><span></span><span></span><span></span></div>

    <audio id="bgm" loop preload="auto">
        <source src="bgm.mp3" type="audio/mpeg">
    </audio>

    <div id="screen-landing" class="screen active">
        <div class="glass-panel">
            <h1>VERSUS<br><span style="color:var(--neon-blue)">FUN</span></h1>
            <p>Realtime Multiplayer Battle</p>
            <br>
            <button onclick="startGame()">PLAY GAME</button>
        </div>
    </div>

    <div id="screen-lobby" class="screen">
        <div class="glass-panel">
            <h2 style="color:var(--neon-blue)">LOBBY</h2>
            
            <p style="text-align: left; width: 80%; margin: 5px auto; font-size: 0.9rem;">Nama Kamu:</p>
            <input type="text" id="player-name" placeholder="Ketik Nama..." maxlength="8">
            
            <p style="text-align: left; width: 80%; margin: 5px auto; font-size: 0.9rem;">Kode Room:</p>
            <input type="text" id="room-code" placeholder="Contoh: 777" maxlength="6">
            
            <button id="btn-join" onclick="joinRoom()">GABUNG</button>
            <button onclick="backTo('landing')" style="background: transparent; border: 1px solid white; box-shadow: none; margin-top: 15px;">BACK</button>
            <p id="loading-msg" style="display:none; color:cyan; margin-top:10px;">Connecting...</p>
        </div>
    </div>

    <div id="screen-menu" class="screen">
        <div id="scoreboard-menu" class="score-panel">
            <span id="p1-name-menu">P1</span>: <span id="p1-score-menu" style="color:yellow">0</span> 
            &nbsp;|&nbsp; 
            <span id="p2-name-menu">Waiting...</span>: <span id="p2-score-menu" style="color:yellow">0</span>
        </div>

        <h2 style="margin: 10px 0;">PILIH GAME</h2>
        <div class="game-grid">
            <div class="game-card" onclick="selectGame('penalty')"><span class="game-icon">âš½</span>Penalty</div>
            <div class="game-card" onclick="selectGame('race')"><span class="game-icon">ğŸï¸</span>Race</div>
            <div class="game-card" onclick="selectGame('tictactoe')"><span class="game-icon">âŒâ­•</span>TicTacToe</div>
            <div class="game-card" onclick="selectGame('rps')"><span class="game-icon">âœ‚ï¸ğŸª¨</span>Suit</div>
            <div class="game-card" onclick="selectGame('reaction')"><span class="game-icon">âš¡</span>Refleks</div>
            <div class="game-card" onclick="selectGame('math')"><span class="game-icon">ğŸ”¢</span>Math</div>
        </div>
    </div>

    <div id="screen-game" class="screen">
        <div id="scoreboard-game" class="score-panel small">
            <span id="p1-name-game">P1</span>: <span id="p1-score-game">0</span> VS <span id="p2-name-game">P2</span>: <span id="p2-score-game">0</span>
        </div>

        <div style="display:flex; justify-content:space-between; width:100%; margin-top:10px;">
            <button onclick="backToMenu()" style="padding: 5px 15px; width: auto; font-size: 0.8rem; background: #333; box-shadow: none; margin:0;">EXIT</button>
        </div>
        
        <h2 id="game-title" style="color:var(--neon-pink); margin-top:5px;">Game</h2>
        <div id="game-container" class="glass-panel" style="min-height: 250px; display:flex; flex-direction:column; justify-content:center; align-items:center;"></div>
        <h3 id="game-result" style="color: yellow; text-shadow: 0 0 5px orange;"></h3>

        <div class="emoji-bar">
            <div onclick="sendEmoji('ğŸ˜‚')">ğŸ˜‚</div>
            <div onclick="sendEmoji('ğŸ˜')">ğŸ˜</div>
            <div onclick="sendEmoji('ğŸ˜­')">ğŸ˜­</div>
            <div onclick="sendEmoji('ğŸ˜¡')">ğŸ˜¡</div>
        </div>
    </div>

    <footer>
        &copy; 2025 Versus Fun. Created by <b>Adib</b>.<br>
        All Rights Reserved.
    </footer>
    <div id="emoji-container"></div>
    <script src="script.js"></script>
</body>
</html>